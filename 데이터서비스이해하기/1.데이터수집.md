# 데이터 수집

## TBD
1. HSDAQ, DAQ, OPC 각 장치별 수집되는 데이터의 특성이 어떻게 다른지 ?
1. PosFrame 화면을 통해 분석 ? 쿼리를 통해 분석 가능 ?

## 데이터 수집 장치의 종류

데이터 서비스 영역에서 수집하는 데이터는 L0 ~ L2 의 각종 수집장치로 부터 발생하며, 데이터 수집장치의 분류는 다음과 같다. 

### DAQ
 - Simense에서 만들어진 IBA라는 이름의 수집장치를 지칭
 - IBA 장치는 5ms, 20ms, 50ms등 MiliSec 단위의 고속 및 대용량 데이터 수집이 필요한 곳에 사용되어지고, 수집된 데이터는 1분 주기로 File 형태로(Multi Row or Single Row) 만들어 져 TC Net으로부터 IFM으로 송신된다. 

### HSDAQ
 - 프스코ICT에서 자체 개발한 DAQ장치
 - 하지만 현재(2017.07) 기준으로는 고속데이터 수집 및 Analyze 툴의 한계 때문에 Simens의 IBA 장치를 대체하지는 못하는 실정

### OPC
 - IBA와 마찬가지로 Simense에서 만든 제품으로 PC, PLC 로부터 데이터를 수집하며 DAQ에 비해 상대적으로 저속인 500ms ~ 1Sec 단위로 데이터를 수집하는 장치 이다. 

### EAI
 -  PC에서 발생하는 MDAS Micro Data 및 MES로부터 압연지시, 조업/품질실적등을 EAI를 통해서 수신하며, EAI 수신 데이터도 IFM으로 연결된다.

### CMS
 - 설비의 진동, 온도를 측정하는 설비관리시스템으로 수신받는 1s 단위의 데이터

### HOPES
 - PDS 데이터이며, 향후에는 HOPES를 없앨수도 있는데 포항 2열연은 HOPSE 데이터를 모두 가져오도록 되어 있다. 

PosFrame 확산을 하게 되면 신규 수집장치의 설치가 필요할 수 있는데, 어떤 수집장치가 필요할지는 수집데이터가 갖는 속성을 잘 파악해야 한다. 
하지만, 수집장치가 필요하다고 해서 무조건 신규로 설치 할 수 없는 것은 DAQ, OPC등의 장치들은 H/W 뿐만 아니라 S/W 라이센스 구매에 대한 비용이 크게 발생하기 때문에 의사결정이 동반되어야 하는 부분이다. 

## 수집장치별 TAG 항목의 정의
각 수집장치별 수집 TAG는 한태우 팀장에게서 자료를 받아야 하며 포항 2열연 플랫폼 구축시 공유된 자료는 다음과 같다. 
 - 포2열연SF플랫폼구축_기술지원_플랫폼활용태그목록.xlsx

## 수집대상 Tag 선정에 대한 고민

후판 Smart Factory Project 수행을 위해 최초 확인한 내용으로, 후판 공장 전체로 수집이 되는 Tag는 총 40만개 정도였고 기술해석 시스템에서는 후판공장 기준 5000개 가량의 Tag를 수집하고 있었다. 
여기서의 고민은 과연 Smart Factory에서 40만개의 Tag를 모두 수집할 필요가 있느냐는 고민이 있었는데, 그래서 의사결정을 한 것은 <u>HMI에서 사용하는 Tag를 수집대상으로 하기로 한 것이다.</u>
확인 결과 수집대상 Tag는 전체 Tag의 22.5% 수준인 9만개의 Tag를 수집대상으로 선정하게 되었다. 

## 수집Tag는 모두 표준화가 필요할까

HMI 사용 Tag를 기준으로 수집대상을 선정은 하였으나, 과연 모든 항목에 대한 표준화를 해야만 하는지에 대한 고민이 있었다. 한가지 항목(Tag)별 DD에 표현해야 할 속성들이 대략 23가지 정도 되는데, 산술적으로 계산해도 207만개 정도의 속성을 정의를 지원할 여력이 없었으며 필요없는 데이터를 굳이 표준화할 필요도 없었다. 
그래서 엔지니어 입장에서 사용할 데이터를 선별하는 작업을 진해하였으며, 활용도를 기준으로 데이터는 다음과 같이 등급을 분류 하였다. 

- A등급 - 필수
- B등급 - 추후 활용 가치가 있음
- C등급 - 활용 가치 없음

항목별 등급을 기준으로 A, B 등급이 표준화 대상으로써 C 등급은 IRMS 에는 등록이 되지만 IFM에서 C 등급 항목은 모두 버려지게 된다. 

## IRMS에 포맷 등록하기
신규로 Format을 등록하기 위해서 IRMS 시스템에 접속을 하여 Format Layout을 등록한다.
기존 MES에서 하던 방식과 동일하며, <b>한가지 차이점은 A, B 등급 항목에 대해서
STD_ITEM_SNUM(표준항목일련번호)를 각 Tag별로 Mapping해주어야 한다. </b>
- [IRMS](http://dpmes.posco.co.kr:8041/M05/M05010/m050000010.jsp) 

## 목록
- [목차](./0.목차.md)